## 스프링

<br>

* 프로젝트에 마이바티스, 오라클 연동
* spring mvc패턴
* 모델(데이터), 뷰(화면), 컨트롤러(연결)
* mvc = DB -(연결)- 데이터 -(연결)- 화면에 연결해주겠다


<br>

* **클래스 파일**을 빈 등록. 역할은 같음
* 애너테이션(자동 등록) or roor-context에 직접 설정

<br>



* 역할 나눈 이유 : 파일 하나에 다 넣으면 이해하기 어려움
* 기능적으로 유사한 것을 모은 것

<br>


### 컨트롤러
* 사용자가 요청한 url과 매핑해주는 것(연결)
* URL 매핑(View 경로 설정)
* 404 / 빈 셋팅 / basePackage
* 파라미터 잘 넘어왔는가?
* url 정확?
* JSP 경로?

<br>


### 서비스
* 데이터 가공(처리)
* 연결 DB, 외부 데이터, 세션
* casting, 계산식
* 데이터 관련 error는 여기 문제

<br>


### 레파지토리
* sql framwork를 호출함
* mapper 연결(내가 필요한 쿼리문만)
* 호출이 안되면 여기 문제


<br>


### JSP
* websquare
* nexacro
* JSTL (숙어 같은 느낌)


<br>


### dto, Map
* 서로 데이터를 주고받을 때 문법이 다르기 때문에 데이터 이동에 사용함
* select했을 때 Dto에 담아서 Repository로 보내고 이동이동이동
* 데이터 임시 저장 공간(휘발, 사라지는 것)



<br>


### 데이터 흐름
* 시작은 항상 컨트롤러
* 메서드는 return 만나면 종료됨
* 클래스 클래스 직접 호출 말고 인터페이스로~ (**수정**해야겠다)


<br>


### 글 등록
* 글쓰기 화면 view 실행
* 사용자 입력 -> parameter을 컨트롤러로 보내기 (목표는 INSERT 쿼리문)
* DTO를 쓰는 이유: 사용자의 입력값을 알 수 없는 파라미터를 **변수 한번에 받아버리기** (묶기)
* service - dao = mapper(insert)
* 등록 이후는 마음대로


<br>


### 상세보기
* 모든 데이터를 보여주는게 아님
* 특정한 데이터를 보여줌


<br>


### 과제
* 글 등록
* 글 번호는 자동 증가.(마지막에서 +)
* 완료되면 리스트로 보여주기 (앗)

=============================================================================


<br>

####  12/12(화)  2시 수업
* 데이터는 건수로 다룸
* 1건 or 다건(많을 다)
* 값 하나를 가져오고 싶을 때 : n번째 로우의 m번째 컬럼
* commons dbcp?
* Maven
* 버전이 안맞거나, Maven에 추가 할 수 없는 것
  * WEB-INF폴더 안에 lib폴더로 넣으면 강제로 넣을 수 있음
* Build Path로 강제로 추가하면 프로젝트에는 추가되지만,(임의로 추가한 것)
* 톰캣에서는 인식이 안됨
  * 톰캣도 읽으러면 WEB_INF폴더 안에 lib폴더에 넣어야 인식할 수 있음
* 실제 실행은 .java 파일이 아닌 컴파일한 .class 파일이 실행됨
* 컴파일된 파일들은 WEB-INF폴더 안의 classes폴더의 파일들이 실행됨.
* 톰캣이 실행할 때 사용하는 파일위치 webapp/WEB-INF !!
  * 우와 그렇구나
  * server.core
* 톰캣이 사용할 수 있는 파일 경로 1. 메이븐이 만든거  2.webapp/WEB-INF아래

<br>

#### MyBatis & 그외의 코드
* xml파일을 MyBatis파일로 바꾸는 방법
* 패키지 나누는 것은 각자 스타일에 따라서
* @Service("service") 
  * 빈 ID는 자바파일 이름과 다른 것
  * 서비스가 여러개일 때 이름을 줘야 호출할 수 있음
  * 라벨처럼 A서비스 B서비스
  * 가져다가 사용할 때 편하려고
  * 컨트롤러 파일 자체를 호출할일이 없어서 얘는 ID 사용하지 않음
* DB에서 값을 받아올 때 DTO/ MAP방식 둘 다 사용할 수 있어야 함
* **DTO**
  * 미리 변수를 지정함
  * 중간에 데이터 변형이 있을 때 메서드를 사용하는 것이 좋음
* **MAP**
  * 내가 필요한 값만 받아올 때 DTO하면 찾지 않은 값이어도 변수가 지정되어 있기 때문에 메모리 차지함 
  * 필요한 값만 받아올 때
  * 소스는 좀 지저분함
  * 중간에 데이터 변형 없이 주고 받을 때 사용하면 좋음

<br>

#### Mapper
* mapper 작성에서 select 할 때 * 사용하지 않기
* 컬럼마다 새로 코딩하는 것이 좋음
* 이후에 양이 늘어나면 가독성이 떨어짐
* 반환할 때 resultType을 많이 씀
```
   <resultMap id="mapId" type="map">
       <result column="seq" property="seq"/>
       <result column="mem_name" property="memName"/> 
       <!--DB표기법 & 자바표기법(카멜)-->
       <!--DB에 mem_name로 셋팅되어있는 값을 자바에서는 memName를 키값으로 변경해서 쓰겠다는 것.-->
   </resultMap> 

    <select id="" resultMap="mapId">
        

    </select>
    <!-- 표기법 지정한 데이터 : 연결 해준 데이터는 카멜식으로 잘 나옴 -->
    <!-- 표기법 지정하지 않은 데이터 : 연결 안해준 데이터는 DB 컬럼명 그대로 나옴 -->

```

<br>


* createObjectURL : 임시로 이미지 주소값을 가지고 있음
* 혹은 fileReader API사용?


















