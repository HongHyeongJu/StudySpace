### K-MOOC 데이터베이스 보안 강의 청강
#### 6주차. 데이터베이스 관리 시스템 (DBMS) 보안

<br>
<br>


### 데이터베이스 관리자
* 역할
  * 시스템 권한 부여
  * 일방사용자 생성 및 권한부여
  * 백업
  * 감사
* 시스템 계정 별로 다른 수행 권한을 가짐
* DBMS별로 다른 계정 및 권한 종류를 가짐
  * 이번 강의에서는 대표적인 오라클과 MySQL 중심으로 학습함

<br>
<br>


## [ 관리자 계정 ]

### Oracle 관리자 계정
* 설치할 때 자동으로 생성되는 관리자 계정
  * SYS, SYSTEM, SYSBACKUP, SYSDG, SYSKM, SYSRAC
* SYS, SYSTEM
  * 시스템 관리 계정. 자동으로 DBA 롤이 부여됨
  * 데이터베이스 시스템 권한 포함. 관리자에게만 부여
* DBA role 시스템 권한 확인 명령문 ```select * from role_sys_privs where role='DBA''```
* SYS
  * 모든 권한을 가지고 있는 관리자 계정
  * 데이터 사전 소유
  * 데이터베이스 설치 시 SYSDBA 권한 자동 부여
* SYSTEM
  * SYS계저과 유사하지만 백업 및 복구, 데이터베이스 업그레이드는 불가함
* SYSBACKUP
  * 백업 및 복구 작업 수행 
* SYSDG
  * Data Guard 작업 수행
  * 하나 이상의 동기화된 대기 데이터베이스 생성 유지 관리하여 데이터 손상을 방지함
* **SYSKM**
  * Transparent Data Encryption(TDE) 작업 수행
  * 오라클에서 제공하는 데이터 암호화 기능 수행 가능
* SYSRAC
  * Real Application Clusters 
  * 오라클 에이전트가 오라클  RAC를 수행할 수 있도록 함




<br>
<br>




### MySQL 관리자 계정
* 데이터베이스 설치와 함께 Root 계정 자동 생성
  * Root 게정은 시스템 계정으로 모든 권한을 보유함
  * Root 계정명은 유추 가능하므로 다른 계정으로 변경 권장
  * 계정명 변경 명령문 ```update user set user='dbsec' where user='root';  flush privileges; ```



<br>
<br>


## [ 1. 관리자 권한 ]





### Oracle의 권한들
* 대표적인 관리자 권한
  * SYSDBA(스키마 SYS)
  * SYSOPER(스키마 PUBLIC)
  * 데이터베이스 생성, 시작, 종료, 백업 또는 복구와 같은 고급 관리 작업을 수행하는데 필요한 관리 권한
  * 접속시 기본 스키마를 사용하여서 접속
* SYSDBA
  * 가장 강력한 관리자 권한
  * 사용자 데이터를 볼 수 있는 기능을 포함하여 대부분 작업 허용
  * RESTRICTED SESSTION 권한 소유함
  * 데이터베이스 생성, 시작, 종료, 백업 또는 복구와 같은 고급 관리 작업을 수행하는데 필요한 관리 권한
  * 서버 파라미터 파일 생성 권한
  * 데이터베이스를 ARCHIVELOG 모드로 변경
  * 데이터 복구
* SYSOPER
  * 사용자가 기본적인 데이터베이스 운영을 위한 작업 수행
  * 사용자 데이터를 볼 수 있는 기능 미제공
  * RESTRICTED SESSTION 권한 소유함
  * SYSDBA의 대부분 수행 가능하지만, 완전 복구만 가능함


<br>
<br>


### MySQL의 권한들
* ALL PRIVILEGES 권한
  * GRANT OPTION 권한을 제외한 모든 권한을 부여함
* MySQL의 특정
* CREATE USER 권한으로 다양한 기능 수행 가능함
  *ORACLE의 경우 각각의 권한이 필요했음

<br>
<br>

---

<br>
<br>


## [ 2. 사용자 생성 및 권한 부여 ]

### Oracle 
* 사용자 생성
  * CREATE USER 시스템 권한 필요함
    * 그러나 이렇게 사용자를 생성해도 실질적 권한은 없음
    * 로그인에 필요한 CREATE SESSION 시스템 권한 부여 필요함
* 사용자 암호 변경
  * ALTER USER 권한 필요함
* 사용자 삭제 
  * DROP USER 권한 싶료함
* 권한 부여 (시스템 권한 / 객체 권한)
  * 시스템 권한
    * GRANT 사용함
    * PUBLIC -> 모든 사용자에게 동일한 권한 부여
    * WITH ADMIN OPTION -> 자신이 부여받은 시스템 권한을 다른 사용자에게 부여 가능함
  * 객체 권한
    * 객체 권한 부여 -> 데이터베이스에 존재하는 모든 객체는 기본적으로 해당 객체를 생성한 사용자만 사용 권한 소유
    * PUBLIC -> 모든 사용자에게 동일한 권한 부여
    * WITH ADMIN OPTION -> 자신이 부여받은 시스템 권한을 다른 사용자에게 부여 가능함



<br>
<br>

### MySQL 
* 사용자 생성
  * CREATE USER 권한 필요함
    * 다양한 기능이 포함되어 있음
* 사용자 암호 변경
  * CREATE USER 권한으로 가능
* 사용자 삭제 
  * CREATE USER 권한으로 가능
* 권한 부여 (시스템 권한 / 객체 권한)
  * GRANT 명령어로 권한 부여함
  * 시스템, 객체 모두 동일한 명령문 사용함
  * ```GRANT 권한명 ON 데이터베이스명.테이블명 TO '사용자명'@'호스트명';```
  * 오라클과 다른점
    * '글로벌 권한' -> 데이터베이스나 테이블 이외의 객체에 적용되는 권한

<br>
<br>

---

<br>
<br>


## [ 3. 역할 ]
* role을 통해 더 효율적으로 사용자 권한하기

<br>

### 역할 ROLE 
* 객체에 대한 여러 권한을 그룹화 한 것
* 역할기반 권한부여
  * 많은 DBMS에서 데이터베이스 보안을 위해 역할기반 권한 부여 기능을 제공함(MySQL 8.0부터)
  * MySQL과 Oracle 방법은 동일함
  * 역할 생성 -> 역할에 권한 부여 -> 역할을 사용자에게 부여


<br>
<br>

---

<br>
<br>


## [ 4. 뷰 ]
* 하나 이상의 테이블을 합하여 만든 가상의 테이블

<br>


### 장점
* 질의어 간소화
* 데이터에 대한 보안
* 논리적 데이터 독립성
  * 데이터 베이스에 영향을 주지 않고, 응용 프로그램이 원하는 형태로 데이터에 접근할 수 있도록 하는것

<br>

### 단점
* 논리적으로 존재하는 가상 테이블로  SELECT문을 제외한 갱신 작업에 제약 존재함

<br>
<br>

---

<br>
<br>


## [ 5. 데이터베이스 감사 ]
* 하나 이상의 테이블을 합하여 만든 가상의 테이블

<br>


### 데이터베이스의 감사
* 데이터베이스는 여러 사용자와 응용프로그램이 함께 사용하므로 중요한 데이터 변견시 누가, 언제 변경했는지 확인이 필요함
* Oracle 오래전부터 제공
* MySQL 5.6부터 제공
* Oracle중심 설명
  * 기본값 : 감사 수행 X
  * 감사 기능 동작 하려면 파라미터 파일의 값 변경 (NONE/DB/OS)
  * 감사 규칙 설정
    * 모든 행동 감사는 비효율적
    * 명확한 규칙 지정 필요함
    * 감사규칙 예시 ex) 특정 질의문 사용시, 실패 또는 사용한 로그인 기록
* 감사 작업 유형
  * 로그인 감사
  * 행동 감사
  * 객체 감사




















