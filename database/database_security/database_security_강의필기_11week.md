### K-MOOC 데이터베이스 보안 강의 청강
#### 11주차. 암호화의 개념

<br>
<br>


## [ 1. 데이터 암호화 ]

<br>

#### 암호화와 복호화
* 암호화
  * 의미를 알수 없는 형식으로 정보를 변환하는 것(평문을 암호문으로 변환)
  * 암호키를 사용하여 정보를 암호문으로 변환하는 것
  * 키 + 암호화 알고리즘
* 복호화
  * 복호키를 사용하여 원래의 정보를 복원하는 것
  * 키 + 복호화 알고리즘
* 암호체계 분류
  * 암호학
    * A. 암호 기술
      * A-1. 대칭 암호
        * 블록 암호 : 블록 단위
        * 스트림 암호 : 비트/바이트 단위
      * A-2. 비대칭 암호
      * A-3. 프로토콜
    * B. 암호 분석
* 암호화의 역사
  * 고대 암호
  * 단일 치환 암호 : 전사 공격, 빈도 분석에 의한 해독이 가능함
  * 다중 치환 암호
  * 대칭 암호 : 암호화키 == 복호화키
  * 비대칭 암호 : 암호화키 != 복호화키
  * 하이브리드 암호 : 대칭 암호 + 비대칭 암호
* 암호 시스템의 요소
  * 평문, 암호문, 암호화 알고리즘, 복호화 알고리즘, 키


<br>
<br>

## [ 2. 암호화 방식 및 알고리즘 ]

<br>

#### 대칭 암호화 == 대칭키 암호화 == 비밀키 암호화 == 단일키 암호화
* 암호화 복호화에 동일한 비밀키를 사용하는 암호화 방식
* 암호화키 == 복호화키
* 필기3


<br>
<br>


#### 대칭키 알고리즘
* DES
  * 1977년 미국 연방 정보처리 표준 규격으로 채택
  * 40년 이상 사용된 블록 암호
  * 평문 X를 64비트로 나눔 -> 각 블록을 56비트의 키를 사용해서 암호문을 생성 
  * 알고리즘 안에서 동일한 연산을 수행하는 16라운드를 거침
  * 메인 키에서 유도되는 서로 다른 서브키가 각 라운드에서 사용됨
  * 56비트 기는 현재 많이 분석되여 현재는 안전하지 않다고 간주됨
  * 3중 DES는 안전해서 현재도 많이 사용됨 -> 2000년에는 AES로 대체됨
* Triple-Des
  * 전사공격으로 현실적인 시간내에 해동되는 짧은 키 길이를 가진 DES를 대신하여 개발됨
  * 키 길이를 112/168비트로 확장하여 DES를 3중으로 겹치게 한 암호 알고리즘
  * 암호화
    * 평문 -> [k1.암호화] -> [k2.복호화] -> [k3.암호화] -> 암호문
    * k1,2,3 다르면 168비트 : DES-EDE3
    * k1,3 동일하면 112 비트 : DES-EDE2
  * 복호화
    * 암호문 ->[k3.복호화] -> [k2.암호화] ->  [k1.복호화] -> 평문
* AES
  * DES를 대신한 새로운 표준 대칭 암호 알고리즘
  * Rijndael 대칭 암호 알고리즘 선정
  * 평문을 128비트의 블록으로 나누고 -> 각 블록을 AES알고리즘과 키를 통해 128비트의 암호화문을 생성함
  * 키 사이즈가 다양함 (128/192/256) -> 라운드수(10/12/14)
  * 키가 길수록 보안성은 높지만 암호화 시간이 길어짐


<br>

<br>

#### 대칭 암호기술의 단점
* 키 분배 문제
  * 사전에 송신자, 수신자가 대칭키를 공유해야 함
  * 비밀키를 반드시 안전하게 전송되어야 함
  * 해결방법 : 키 사전 공유에 의한 해결, 키 배포 센터에 의한 해결, 키 교환 알고리즘, 공개키 암호헤 의한 해결(비대칭 키)
  * 관리해야 하는 키의 수가 많음 

<br>


#### 비대칭 암호화 == 공개키 암호화
* 특성
  * 원리 : 키를 공개키, 개인키로 나눔(분리)
  * 암호화는 공개키로, 복호화는 개인키로
  * 키 쌍 생성
* 공개키 암호 시스템의 분류
  * 암호화/복호화
  * 디지털 서명
* 암호화에 사용되는 공개키


<br>
<br>


#### 비대칭(공개 키)대표 알고리즘
* RSA 알고리즘
* Diffie-Hellman 알고리즘 : 키 교환에 사용
* 디지털 서명 표준 DSS : 디지털 서명에 사용
* 타원곡선 암호 ECC

<br>

* RSA
  * 지금까지 널리 사용됨
  * 키쌍 : 공개키 + 개인키
  * 암호화 : 평문을 E제곱해서 N으로 나눈 나머지
  * 복호화 : 암호문을 D제곱해서 N으로 나눈 나머지
* ECC 타원곡선 암호
  * RSA에 비해 작은 사이즈의 키로 높은 성능을 냄


<br>
<br>

<br>

## [ 3-4. 데이터베이스 암호화 방식 : DB 서버 내부/외부 ]


<br>

#### 데이터 암호화 방식
* 데이터 암호화 방식 : 암복호화 모듈 위치와, 요청 위치 조합에 따라 5가지로 구분
  * DB서버 내부
    * DB 서버 암호화
    * DBMS 자체 암호화
    * DBMS 암호화 기능 호출
  * DB서버 외부
    * 응용 프로그램 자체 암호화
    * 운영체제 암호화

<br>


#### DB서버 내부
* DB 서버 암호화
  * 플러그인 방식 : 암복호화 모듈이 DB서버에 설치, DBMS에서 플로그인으로 연결된 암복호화 모듈을 호출함
  * 응용프로그램의 수정이 거의 필요하지 않아서 구현 용이성이 뛰어남
  * 어플리케이션 서버의 성능에 영향을 주지 않음
  * DBMS에서는 플로그인 호출 시 추가적 부하발생으로 성능 저하 가능성 있음
  * 성능이 중요한 요소가 되는 환경에서는 벤치마킹 테스트 수행으로 최적의 솔루션 선택하기
  * 특성
    * 색인검색, 배치처리 가능
* DBMS 자체 암호화
  * 기존의 커널 방식 : DBMS에 내장되어 있는 암호화기능(TDE)을 이용하여 암복호화 처리를 수행함
  * 기존 응용프로그램의 수정이나 DB 스키마 변경이 별로 필요하지 않음
  * DBMS 엔진에 최적화된 성능 제공
  * 대신 많은 비용이 소요됨(비싸!)
* DBMS 암호화 기능 호출
  * DBMS가 자체적으로 암복호화 기능을 수행하는  API를 제공하고, 해당 함수를 사용하기 위해 응용프로그램에서 호출하는 방식
  * 암복호화 API를 사용하는 응용프로그램의 수정이 필요함(어떤 필드에 암복호화 할 것인지)
  * DB서버에 추가적인 부하 발생 가능성이 있음
  * 색인 검색 불가능함
  * 키를 생성하고 안전하게 보관하는 것이 중요함

<br>


#### DB서버 외부
* 응용 프로그램 자체 암호화 
  * 어플리케이션 서버에서 암호화 기능 구현 : 암복호화 모듈이 API 라이브러리 형태로 각 어플리케이션 서버에 설치되고, 응용프로그램에서 암복호화 모듈을 호출하는 방식
  * DB서버에는 영향주지 않음
  * 어플리케이션 서버에 추가적은 부하 발생
  * 구축 시 응용 프로그램 전체 또는 일부 수정 필요
  * 색인, 배치 가능
  * 대량의 온라인 트갠잭션 처리 시 암복호화를 다수의 어플리케이션 서버에서 처리하면 효율적
* 운영체제 암호화
  * DB파일 자체를 암호화 : OS에서 발생하는 입출력 시스템 호출을 이용한 암복호화 방식


<br>


#### 데이터베이스 암호화 방식 선택 시 고려사항
* 암호화 방식 마다 성능에 미치는 영향이 다르므로 특성, 장단점 및 제약사항을 고려하여 선택
* 일반적인 고려사항
  * 구현 용이성, 구축 비용, 기술지원 유지보수 여부
  * 암호화 성능 및 안정성
  * 공공기관 시 국가정보원 인증 및 검증 여부
* 추가적인 고려사항
  * 암복호화 위치
  * 생인검색 가능 유무, 배치처리 가능 여부












